# Этап 3. Анализ результатов HyperLogLog

## 1) Точность (сравнение с теорией)
Я выбрала **B = 12**, значит число регистров **m = 2^B = 4096**.

Для HyperLogLog теоретическая относительная ошибка (порядок величины) оценивается как:

- \(\text{RSE} \approx \frac{1.04}{\sqrt{m}} = \frac{1.04}{64} \approx 1.63\%\)
- более «широкая» граница из задания: \(\frac{1.3}{\sqrt{m}} = \frac{1.3}{64} \approx 2.03\%\)

По графику №1 видно, что **оценка \(N_t\)** почти совпадает с **истинным значением \(F^0_t\)**: линии идут очень близко, отклонение небольшое и колеблется вокруг нуля (без явного постоянного завышения/занижения).

## 2) Стабильность (дисперсия)
По графику №2 видно:
- средняя оценка **\(\mathbb{E}(N_t)\)** растёт вместе с количеством обработанных элементов;
- «полоса неопределённости» **\(\pm \sigma_{N_t}\)** тоже растёт в абсолютных числах, но **в относительных процентах** остаётся небольшой.

Это означает, что алгоритм **стабилен**: разброс оценок между разными потоками не становится неконтролируемым.

## 3)Пояснение за выбор B=12
- **Память**: 4096 регистров (если хранить `uint8_t`, это около **4 КБ**).
- **Точность**: ожидаемая ошибка порядка **~1–2%**, что подтверждается экспериментом.
- Увеличение B (например, до 14) даёт меньше ошибку, но требует больше памяти; уменьшение B (например, до 10) заметно ухудшит точность.

## 4) Хеш-функция и равномерность
Гистограмма по корзинам выглядит **примерно равномерной**: нет «пустых» больших зон и сильных перекосов.
Это важно, потому что HyperLogLog рассчитывает на то, что элементы **равномерно распределяются по регистрам** — тогда оценка получается корректной.
